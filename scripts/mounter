#!/usr/bin/bash

Blkinfo(){
    for partlabel in $@ ; do
    echo "/dev/$partlabel" $(blkid -p -o value -s TYPE -s LABEL "/dev/$partlabel")
    done
}

Mounter(){
    if [[ $3 == *fat* ]] ; then
        if ! mount | grep -q $1 ; then
            mkdir -p /mnt/$2 && \
            mount $1 /mnt/$2 && \ 
            dunstify -i drive-removable-media "$2 successfully mounted" || \
            notify-send "$2 successfully mounted"
        fi
    fi
}

Listen(){
while read -r line ; do
    case $line in
    *sdb:*|*sdc:*|*sdd:*|*sde:*)
    fullstring=$(Blkinfo ${line#\[*\: })
    echo $fullstring
    Mounter $fullstring
    esac
done
}

dmesg -W --facility=kern | Listen &